<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Example 2: Calculating the lifetime along a given mode: CO on Pd(111) &mdash; coolvib  documentation</title>
    
    <link rel="stylesheet" href="_static/agogo.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="coolvib  documentation" href="index.html" />
    <link rel="up" title="Tutorial" href="tutorial.html" />
    <link rel="next" title="Example 3: Setting up finite difference calculation for CO on Pd(111)" href="example3.html" />
    <link rel="prev" title="Example 1: Calculating a friction tensor from FHI-aims data: CO on Cu(100)" href="example1.html" /> 
  </head>
  <body role="document">
    <div class="header-wrapper" role="banner">
      <div class="header">
        <div class="headertitle"><a
          href="index.html">coolvib  documentation</a></div>
        <div class="rel" role="navigation" aria-label="related navigation">
          <a href="example1.html" title="Example 1: Calculating a friction tensor from FHI-aims data: CO on Cu(100)"
             accesskey="P">previous</a> |
          <a href="example3.html" title="Example 3: Setting up finite difference calculation for CO on Pd(111)"
             accesskey="N">next</a> |
          <a href="py-modindex.html" title="Python Module Index"
             >modules</a> |
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a>
        </div>
       </div>
    </div>

    <div class="content-wrapper">
      <div class="content">
        <div class="document">
            
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <span class="target" id="module-examples.example2"></span><div class="section" id="example-2-calculating-the-lifetime-along-a-given-mode-co-on-pd-111">
<h1>Example 2: Calculating the lifetime along a given mode: CO on Pd(111)<a class="headerlink" href="#example-2-calculating-the-lifetime-along-a-given-mode-co-on-pd-111" title="Permalink to this headline">¶</a></h1>
<p><strong>ATTENTION</strong> This example/functionality is broken and needs to be fixed</p>
<p>In this example we calculate a single lifetime and relaxation rate along 
a given vibrational normal mode for CO on Pd(111), namely the internal stretch mode.
Example 3 shows how to calculate finite difference displacements along a normal mode.</p>
<p>In order to run this example you need to either run example 3 with FHI-aims 
or download the dataset from following URL and extract it in the example folder</p>
<p><a class="reference external" href="http://www.damaurer.at/software/coolvib/example2.tar.gz">Download Dataset</a></p>
<div class="section" id="code">
<h2>Code<a class="headerlink" href="#code" title="Permalink to this headline">¶</a></h2>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1">#    This file is part of coolvib</span>
<span class="c1">#</span>
<span class="c1">#        coolvib is free software: you can redistribute it and/or modify</span>
<span class="c1">#        it under the terms of the GNU General Public License as published by</span>
<span class="c1">#        the Free Software Foundation, either version 3 of the License, or</span>
<span class="c1">#        (at your option) any later version.</span>
<span class="c1">#</span>
<span class="c1">#        coolvib is distributed in the hope that it will be useful,</span>
<span class="c1">#        but WITHOUT ANY WARRANTY; without even the implied warranty of</span>
<span class="c1">#        MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span>
<span class="c1">#        GNU General Public License for more details.</span>
<span class="c1">#</span>
<span class="c1">#        You should have received a copy of the GNU General Public License</span>
<span class="c1">#        along with coolvib.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">example 2: </span>
<span class="sd">Calculating lifetime along a given mode displacement for </span>
<span class="sd">CO on Pd(111) internal stretch calculated with FHI-Aims</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">from</span> <span class="nn">ase.io</span> <span class="kn">import</span> <span class="n">read</span>
<span class="kn">import</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>

<span class="kn">import</span> <span class="nn">coolvib</span>
<span class="kn">from</span> <span class="nn">scipy</span> <span class="kn">import</span> <span class="n">linalg</span> <span class="k">as</span> <span class="n">LA</span>

<span class="c1">#####DEFINE SYSTEM######</span>

<span class="n">system</span> <span class="o">=</span> <span class="n">read</span><span class="p">(</span><span class="s1">&#39;mode/mode_eq/geometry.in&#39;</span><span class="p">)</span>
<span class="n">cell</span> <span class="o">=</span> <span class="n">system</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">coolvib</span><span class="o">.</span><span class="n">workflow_mode</span><span class="p">(</span><span class="n">system</span><span class="p">,</span> <span class="n">code</span><span class="o">=</span><span class="s1">&#39;aims&#39;</span><span class="p">)</span>

<span class="n">finite_difference_incr</span> <span class="o">=</span> <span class="mf">0.0025</span>

<span class="n">keywords</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">&#39;discretization_type&#39;</span> <span class="p">:</span> <span class="s1">&#39;gaussian&#39;</span><span class="p">,</span>
    <span class="s1">&#39;discretization_broadening&#39;</span> <span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="s1">&#39;discretization_length&#39;</span> <span class="p">:</span> <span class="mf">0.01</span><span class="p">,</span>
    <span class="s1">&#39;max_energy&#39;</span> <span class="p">:</span> <span class="mi">7</span><span class="p">,</span>
    <span class="s1">&#39;temperature&#39;</span> <span class="p">:</span> <span class="mi">300</span><span class="p">,</span>
    <span class="s1">&#39;delta_function_type&#39;</span><span class="p">:</span> <span class="s1">&#39;gaussian&#39;</span><span class="p">,</span>
    <span class="s1">&#39;delta_function_width&#39;</span><span class="p">:</span> <span class="mf">0.60</span><span class="p">,</span>
    <span class="s1">&#39;perturbing_energy&#39;</span> <span class="p">:</span> <span class="mf">0.0</span><span class="p">,</span>
        <span class="p">}</span>

<span class="k">print</span> <span class="s1">&#39;workflow initialized and keywords set&#39;</span>

<span class="c1">######READ QM INPUT DATA###</span>

<span class="n">model</span><span class="o">.</span><span class="n">read_input_data</span><span class="p">(</span><span class="n">spin</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> 
        <span class="n">path</span><span class="o">=</span><span class="s1">&#39;mode/&#39;</span><span class="p">,</span> 
        <span class="n">prefix</span><span class="o">=</span><span class="s1">&#39;mode&#39;</span><span class="p">,</span> 
        <span class="n">filename</span><span class="o">=</span><span class="s1">&#39;aims.out&#39;</span><span class="p">,</span> 
        <span class="n">incr</span><span class="o">=</span><span class="n">finite_difference_incr</span><span class="p">)</span>
<span class="k">print</span> <span class="s1">&#39;successfully read QM input data&#39;</span>

<span class="c1"># model.calculate_spectral_function(mode=&#39;default&#39;, **keywords)</span>
<span class="c1"># print &#39;successfully calculated spectral_function&#39;</span>
<span class="c1"># model.print_spectral_function(&#39;nacs-spectrum.out&#39;)</span>
<span class="c1"># model.calculate_friction_from_spectrum(**keywords)</span>

<span class="k">print</span> <span class="s1">&#39;successfully calculated friction tensor&#39;</span>
<span class="n">model</span><span class="o">.</span><span class="n">calculate_friction</span><span class="p">(</span><span class="o">**</span><span class="n">keywords</span><span class="p">)</span>

<span class="n">model</span><span class="o">.</span><span class="n">analyse_friction</span><span class="p">()</span>




</pre></div>
</div>
</div>
<div class="section" id="detailed-explanation">
<h2>Detailed Explanation<a class="headerlink" href="#detailed-explanation" title="Permalink to this headline">¶</a></h2>
<p>All settings are equivalent to the tensor case in example 1. The only 
difference is that now there is only one spectral function and routines associated 
with calculating friction are called friction (rather than friction_tensor).</p>
</div>
</div>


          </div>
        </div>
      </div>
        </div>
        <div class="sidebar">
          <h3>Table Of Contents</h3>
          <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="intro.html"> Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="methods.html"> Theory and Methods</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="tutorial.html"> Tutorial</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="example1.html">Example 1: Calculating the friction tensor from FHI-aims</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="">Example 2: Calculating lifetimes along a given normal mode</a></li>
<li class="toctree-l2"><a class="reference internal" href="example3.html">Example 3: Setting up finite difference calculations for Example 1 and Example 2</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="coolvib.html"> Coolvib: Modules and Classes</a></li>
</ul>

          <div role="search">
            <h3 style="margin-top: 1.5em;">Search</h3>
            <form class="search" action="search.html" method="get">
                <input type="text" name="q" />
                <input type="submit" value="Go" />
                <input type="hidden" name="check_keywords" value="yes" />
                <input type="hidden" name="area" value="default" />
            </form>
            <p class="searchtip" style="font-size: 90%">
                Enter search terms or a module, class or function name.
            </p>
          </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

    <div class="footer-wrapper">
      <div class="footer">
        <div class="left">
          <div role="navigation" aria-label="related navigaton">
            <a href="example1.html" title="Example 1: Calculating a friction tensor from FHI-aims data: CO on Cu(100)"
              >previous</a> |
            <a href="example3.html" title="Example 3: Setting up finite difference calculation for CO on Pd(111)"
              >next</a> |
            <a href="py-modindex.html" title="Python Module Index"
              >modules</a> |
            <a href="genindex.html" title="General Index"
              >index</a>
          </div>
          <div role="note" aria-label="source link">
              <br/>
              <a href="_sources/example2.txt"
                rel="nofollow">Show Source</a>
          </div>
        </div>

        <div class="right">
          
    <div class="footer" role="contentinfo">
        &copy; Copyright 2015, Reinhard J. Maurer.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.3.6.
    </div>
        </div>
        <div class="clearer"></div>
      </div>
    </div>

  </body>
</html>